import{S as ut,U as mt}from"./chunk-DTT4EXDO.js";import{$ as T,$a as N,Ca as U,E as W,Fa as G,Ga as h,Hb as x,Ia as p,Pb as nt,Pd as pt,Qb as z,Qd as ct,Ra as R,Rb as k,Ub as it,W as A,Wa as y,Xa as S,Ya as E,Yb as lt,Z as C,aa as j,ab as J,ba as Z,cc as ot,db as K,dc as st,fb as c,ga as q,gb as X,ha as $,hb as Y,ia as B,ic as rt,lb as b,mb as H,nb as M,oa as P,ob as f,pb as L,qb as F,ta as D,xb as tt,xc as at,ya as d,yb as et,zb as w}from"./chunk-AYH25EOF.js";var Ct=["orgEl"],dt=["shadowOrgEl"],xt=["shadowTextEl"],Tt=["*"],yt=()=>({"overflow-wrap":"break-word","word-wrap":"break-word"}),Q=t=>({$implicit:t}),Et=t=>({"-webkit-line-clamp":t,"-webkit-box-orient":"vertical"});function wt(t,o){t&1&&N(0)}function vt(t,o){if(t&1&&E(0,"div",12),t&2){let s=c(3);p("innerHTML",s.orgHtml,D)}}function Ot(t,o){if(t&1&&(y(0,"span",10),h(1,wt,1,0,"ng-container",11)(2,vt,1,1,"ng-template",null,2,x),S()),t&2){let s=f(3),e=c().$implicit;p("nzTooltipTitle",s)("nzTooltipOverlayStyle",et(3,yt)),d(),p("ngTemplateOutlet",e)}}function St(t,o){t&1&&N(0)}function bt(t,o){if(t&1&&h(0,St,1,0,"ng-container",11),t&2){let s=c().$implicit;p("ngTemplateOutlet",s)}}function Ht(t,o){if(t&1&&h(0,Ot,4,4,"span",9)(1,bt,1,1),t&2){let s=c();R(0,s.tooltip?0:1)}}function Mt(t,o){if(t&1&&E(0,"span",13),t&2){let s=c();p("ngClass",s.cls)}}function Lt(t,o){}function Ft(t,o){if(t&1&&L(0),t&2){let s=c(2);F(s.text)}}function It(t,o){if(t&1&&h(0,Lt,0,0,"ng-template",14)(1,Ft,1,1,"ng-template",null,3,x),t&2){let s=f(2);c();let e=f(4);p("ngTemplateOutlet",e)("ngTemplateOutletContext",w(2,Q,s))}}function Dt(t,o){}function Rt(t,o){if(t&1&&E(0,"div",15),t&2){let s=c(2);p("ngClass",s.cls)("ngStyle",w(2,Et,s.lines))}}function Nt(t,o){if(t&1&&h(0,Dt,0,0,"ng-template",14)(1,Rt,1,4,"ng-template",null,4,x),t&2){let s=f(2);c();let e=f(4);p("ngTemplateOutlet",e)("ngTemplateOutletContext",w(2,Q,s))}}function zt(t,o){}function kt(t,o){if(t&1&&L(0),t&2){let s=c(2);F(s.linsWord)}}function Qt(t,o){if(t&1&&(y(0,"div",13)(1,"div",16),h(2,zt,0,0,"ng-template",14)(3,kt,1,1,"ng-template",null,5,x),E(5,"div",17,6),y(7,"div",18,7)(9,"span"),L(10),S()()()()),t&2){let s=f(4),e=c(),n=f(4);p("ngClass",e.cls),d(2),p("ngTemplateOutlet",n)("ngTemplateOutletContext",w(5,Q,s)),d(3),p("innerHTML",e.orgHtml,D),d(5),F(e.text)}}var Xt=(()=>{let o=class o{constructor(){this.el=C(P).nativeElement,this.ngZone=C(U),this.dom=C(at),this.doc=C(it),this.cdr=C(nt),this.isSupportLineClamp=this.doc.body.style.webkitLineClamp!==void 0,this.inited=!1,this.type="default",this.cls={},this.text="",this.targetCount=0,this.tooltip=!1,this.fullWidthRecognition=!1,this.tail="..."}get linsWord(){let{targetCount:e,text:n,tail:i}=this;return(e>0?n.substring(0,e):"")+(e>0&&e<n.length?i:"")}get win(){return this.doc.defaultView||window}getStrFullLength(e){return e.split("").reduce((n,i)=>{let l=i.charCodeAt(0);return l>=0&&l<=128?n+1:n+2},0)}cutStrByFullLength(e,n){let i=0;return e.split("").reduce((l,a)=>{let r=a.charCodeAt(0);return r>=0&&r<=128?i+=1:i+=2,i<=n?l+a:l},"")}bisection(e,n,i,l,a,r){let _=this.tail;r.innerHTML=a.substring(0,n)+_;let m=r.offsetHeight;return m<=e?(r.innerHTML=a.substring(0,n+1)+_,m=r.offsetHeight,m>e||n===i?n:(i=n,n=l-i===1?i+1:Math.floor((l-i)/2)+i,this.bisection(e,n,i,l,a,r))):n-1<0?n:(r.innerHTML=a.substring(0,n-1)+_,m=r.offsetHeight,m<=e?n-1:(l=n,n=Math.floor((l-i)/2)+i,this.bisection(e,n,i,l,a,r)))}genType(){let{lines:e,length:n,isSupportLineClamp:i}=this;this.cls={ellipsis:!0,ellipsis__lines:e&&!i,"ellipsis__line-clamp":e&&i},!e&&!n?this.type="default":e?i?this.type="line-clamp":this.type="line":this.type="length"}gen(){let{type:e,lines:n,length:i,fullWidthRecognition:l,tail:a,orgEl:r,cdr:_,ngZone:m}=this;if(e==="length"){let v=r.nativeElement;if(v.children.length>0)throw new Error("Ellipsis content must be string.");let g=v.textContent;if((l?this.getStrFullLength(g):g.length)<=i||i<0)this.text=g;else{let u;i-a.length<=0?u="":u=l?this.cutStrByFullLength(g,i):g.slice(0,i),this.text=u+a}m.run(()=>_.detectChanges())}else if(e==="line"){let{shadowOrgEl:v,shadowTextEl:g}=this,O=v.nativeElement,u=O.innerText||O.textContent,ht=parseInt(this.win.getComputedStyle(this.getEl(".ellipsis")).lineHeight,10),I=n*ht,ft=this.getEl(".ellipsis__handle");if(ft.style.height=`${I}px`,O.offsetHeight<=I)this.text=u,this.targetCount=u.length;else{let V=u.length,gt=Math.ceil(V/2),_t=this.bisection(I,gt,0,V,u,g.nativeElement.firstChild);this.text=u,this.targetCount=_t}m.run(()=>_.detectChanges())}}getEl(e){return this.el.querySelector(e)}executeOnStable(e){this.ngZone.isStable?e():this.ngZone.onStable.asObservable().pipe(W(1)).subscribe(e)}refresh(){this.genType();let{type:e,dom:n,orgEl:i,cdr:l}=this,a=i.nativeElement.innerHTML;this.orgHtml=n.bypassSecurityTrustHtml(a),l.detectChanges(),this.executeOnStable(()=>{if(this.gen(),e!=="line"){let r=this.getEl(".ellipsis");r&&(r.innerHTML=a)}})}ngAfterViewInit(){this.inited=!0,this.refresh()}ngOnChanges(){this.inited&&this.refresh()}};o.\u0275fac=function(n){return new(n||o)},o.\u0275cmp=j({type:o,selectors:[["ellipsis"]],viewQuery:function(n,i){if(n&1&&(b(Ct,5),b(dt,5),b(xt,5)),n&2){let l;H(l=M())&&(i.orgEl=l.first),H(l=M())&&(i.shadowOrgEl=l.first),H(l=M())&&(i.shadowTextEl=l.first)}},inputs:{tooltip:[T.HasDecoratorInputTransform,"tooltip","tooltip",z],length:[T.HasDecoratorInputTransform,"length","length",e=>e==null?null:k(e)],lines:[T.HasDecoratorInputTransform,"lines","lines",e=>e==null?null:k(e)],fullWidthRecognition:[T.HasDecoratorInputTransform,"fullWidthRecognition","fullWidthRecognition",z],tail:"tail"},exportAs:["ellipsis"],standalone:!0,features:[G,q,tt],ngContentSelectors:Tt,decls:9,vars:1,consts:[["orgEl",""],["tooltipTpl",""],["titleTpl",""],["lengthTpl",""],["lineClampTpl",""],["lineTpl",""],["shadowOrgEl",""],["shadowTextEl",""],[2,"display","none",3,"cdkObserveContent"],["nz-tooltip",""],["nz-tooltip","",3,"nzTooltipTitle","nzTooltipOverlayStyle"],[4,"ngTemplateOutlet"],[3,"innerHTML"],[3,"ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngClass","ngStyle"],[1,"ellipsis__handle"],[1,"ellipsis__shadow",3,"innerHTML"],[1,"ellipsis__shadow"]],template:function(n,i){if(n&1){let l=J();X(),y(0,"div",8,0),K("cdkObserveContent",function(){return $(l),B(i.refresh())}),Y(2),S(),h(3,Ht,2,1,"ng-template",null,1,x)(5,Mt,1,1)(6,It,3,4)(7,Nt,3,4)(8,Qt,11,7)}if(n&2){let l;d(5),R(5,(l=i.type)==="default"?5:l==="length"?6:l==="line-clamp"?7:l==="line"?8:-1)}},dependencies:[pt,ut,st,lt,ot],encapsulation:2,changeDetection:0});let t=o;return t})();var Yt=(()=>{let o=class o{};o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=Z({type:o}),o.\u0275inj=A({imports:[rt,ct,mt]});let t=o;return t})();export{Xt as a,Yt as b};
